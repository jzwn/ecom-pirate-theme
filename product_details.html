<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackheart Emporium - Product Details</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Uncial+Antiqua&family=EB+Garamond:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* Internal CSS for the Pirate Product Details Page */
        body {
            font-family: 'EB Garamond', serif;
            background-color: #0a0a1a;
            color: #f5ebd7; /* Default parchment text color */
            overflow-x: hidden;
        }

        h1, h2, h3, .heading-font {
            font-family: 'Uncial Antiqua', cursive;
        }

        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* The main content card, styled like aged parchment */
        .parchment-card {
            background: rgba(245, 235, 215, 0.9);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(218, 165, 32, 0.4);
            color: #4b3a26; /* Dark brown text for readability on parchment */
        }

        /* Custom styling for form elements */
        .pirate-input, .pirate-select {
            background-color: rgba(181, 153, 119, 0.3); /* Transparent wood color */
            border: 1px solid #8B4513; /* SaddleBrown border */
            border-radius: 8px;
            padding: 0.75rem;
            color: #4b3a26;
            width: 100%;
        }
        .pirate-select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%234b3a26' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1em 1em;
        }
        
        /* Custom button style */
        .pirate-btn {
            background-color: #5C4033; /* Dark wood brown */
            color: #f5ebd7;
            transition: background-color 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
        }
        .pirate-btn:hover {
            background-color: #7a5a4a;
        }
        .pirate-btn.secondary {
            background-color: transparent;
            border: 2px solid #5C4033;
            color: #5C4033;
            text-shadow: none;
        }
        .pirate-btn.secondary:hover {
            background-color: #5C4033;
            color: #f5ebd7;
        }
    </style>
</head>
<body class="min-h-screen">

    <canvas id="bg-canvas"></canvas>

    <header class="p-8 text-center">
        <a href="index.html" class="text-4xl text-white tracking-wider heading-font hover:text-amber-300 transition-colors">BLACKHEART</a>
    </header>

    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div id="product-not-found" class="hidden text-center text-white">
            <h1 class="text-4xl">Product Not Found</h1>
            <p class="mt-4 text-xl">This treasure seems to have been lost at sea.</p>
            <a href="index.html" class="mt-8 inline-block pirate-btn font-bold py-3 px-6 rounded-lg text-lg">Return to Port</a>
        </div>
        
        <div id="product-container" class="parchment-card rounded-2xl overflow-hidden grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12 p-8 md:p-12">
            <!-- Product Image Section -->
            <div id="product-image-container" class="bg-gray-200/50 p-4 rounded-lg flex items-center justify-center">
                <!-- SVG will be injected here -->
            </div>

            <!-- Product Details Section -->
            <div class="flex flex-col">
                <h1 id="product-name" class="text-4xl md:text-5xl font-bold tracking-wide">Product Name</h1>
                <p id="product-meta" class="text-lg mt-2 text-amber-800">Product metadata goes here.</p>
                <p id="product-price" class="text-4xl font-bold my-6 text-amber-900 heading-font">Price</p>
                <p id="product-description" class="text-base leading-relaxed">Product description...</p>
                
                <div class="actions mt-auto pt-8 space-y-4">
                    <div>
                        <label for="variant" class="block text-sm font-medium mb-1">Select Model:</label>
                        <select id="variant" class="pirate-select">
                            <option>Classic Edition</option>
                            <option>Silver Inlay</option>
                            <option>Captain's Special</option>
                        </select>
                    </div>

                    <div>
                        <label for="qty" class="block text-sm font-medium mb-1">Quantity:</label>
                        <input type="number" id="qty" value="1" min="1" class="pirate-input" />
                    </div>

                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <button id="plunder-btn" class="pirate-btn font-bold py-4 px-4 rounded-lg text-lg">üè¥‚Äç‚ò† PLUNDER</button>
                        <button class="pirate-btn secondary font-bold py-4 px-4 rounded-lg text-lg">‚öì Save for Voyage</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="text-center text-gray-400 py-12 px-4">
        <p>¬© 2025 BLACKHEART ‚Ä¢ All Rights Plundered ‚Ä¢ Sail Responsibly</p>
    </footer>

    <script>
        // --- PRODUCT DATABASE ---
        const products = {
            'pirate001': {
                name: "Captain's Throne",
                meta: "Hand-carved oak ‚Ä¢ Whalebone inlay ‚Ä¢ For true pirate kings",
                price: "$450.00",
                description: "Command your vessel from a throne worthy of your title. Carved from the mightiest oaks and inlaid with polished whalebone, this throne is the ultimate symbol of power on the seven seas.",
                svg: `<svg class="w-full h-full object-contain text-gray-700" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet"><path d="M20,90 L20,70 Q20,60 30,60 L70,60 Q80,60 80,70 L80,90 Z" fill="none" stroke="currentColor" stroke-width="3"/><path d="M20,70 L15,30 Q15,10 50,10 Q85,10 85,30 L80,70" fill="none" stroke="currentColor" stroke-width="3"/><rect x="15" y="65" width="70" height="10" fill="currentColor"/><circle cx="15" cy="60" r="5" fill="currentColor"/><circle cx="85" cy="60" r="5" fill="currentColor"/></svg>`
            },
            'pirate002': {
                name: "Ancient Treasure Map",
                meta: "Aged parchment ‚Ä¢ Leads to unknown riches ‚Ä¢ Handle with care",
                price: "$85.50",
                description: "This is no mere drawing. It's a key to a fortune beyond your wildest dreams. The ink is faded and the parchment is worn, but the path it charts is true... for those brave enough to follow.",
                svg: `<svg class="w-full h-full object-contain text-gray-700" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet"><rect x="15" y="10" width="70" height="80" rx="5" fill="#e6ccaa" stroke="currentColor" stroke-width="2"/><path d="M30 30 L45 45 L35 60 L65 70" fill="none" stroke-dasharray="3,3" stroke="#a0522d" stroke-width="2"/><path d="M60 65 L70 75 M70 65 L60 75" stroke="red" stroke-width="4"/></svg>`
            },
            'pirate003': {
                name: "Jolly Roger Flag",
                meta: "Battle-torn canvas ‚Ä¢ Strikes fear into merchants ‚Ä¢ Weather-resistant",
                price: "$39.99",
                description: "Hoist the colors and let the world know you're coming. Our Jolly Roger is crafted from durable canvas, designed to withstand the harshest sea winds and the fiercest of battles. A true pirate's calling card.",
                svg: `<svg class="w-full h-full object-contain text-gray-800" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet"><rect x="10" y="10" width="80" height="50" fill="black"/><circle cx="50" cy="30" r="10" fill="white"/><path d="M40 25 C40 20 60 20 60 25" fill="white"/><path d="M35 50 L65 40 M35 40 L65 50" stroke="white" stroke-width="4"/><path d="M10 10 L10 90" fill="none" stroke="currentColor" stroke-width="3"/></svg>`
            },
            'pirate004': {
                name: "Ship's Lantern",
                meta: "Polished brass ‚Ä¢ Burns whale oil ‚Ä¢ Pierces the thickest fog",
                price: "$65.00",
                description: "Guide your ship through treacherous nights with this reliable brass lantern. Its bright, steady flame is protected from the elements, ensuring you'll never lose your way in the dark.",
                svg: `<svg class="w-full h-full object-contain text-gray-700" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet"><path d="M40 20 Q50 10 60 20 Z" fill="currentColor"/><rect x="30" y="20" width="40" height="50" rx="5" fill="none" stroke="currentColor" stroke-width="3"/><rect x="35" y="25" width="30" height="40" fill="#ffec8b" opacity="0.7"/><path d="M50 20 L50 10" stroke="currentColor" stroke-width="3"/><rect x="25" y="70" width="50" height="10" rx="3" fill="currentColor"/></svg>`
            },
            'pirate005': {
                name: "Pirate Flintlock Gun",
                meta: "Limited plunder ‚Ä¢ Authentic steel & oak ‚Ä¢ Black powder ready",
                price: "50,000 Doubloons",
                description: "The legendary Blackheart Flintlock, forged for captains of the high seas. Perfect for boarding raids or defending your treasure chest. Built with oak grip, brass barrel, and engraved with skull insignia.",
                svg: `<svg class="w-full h-full object-contain text-gray-700" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet"><path d="M30 50 L80 50 L90 40 L85 35 Z" fill="#8B4513" stroke="black" stroke-width="1.5"/><path d="M20 50 Q10 50 15 65 L25 65 Q30 50 30 50" fill="#8B4513" stroke="black" stroke-width="1.5"/><path d="M80 50 L95 50 L95 45 L80 45 Z" fill="grey" stroke="black" stroke-width="1.5"/><rect x="75" y="50" width="5" height="5" fill="grey" stroke="black" stroke-width="1"/></svg>`
            }
        };

        // --- DYNAMIC CONTENT LOADER ---
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');
            const product = products[productId] || products['pirate005']; // Default to gun if ID is missing

            if (product) {
                document.getElementById('product-name').textContent = product.name;
                document.getElementById('product-meta').textContent = product.meta;
                document.getElementById('product-price').textContent = product.price;
                document.getElementById('product-description').textContent = product.description;
                document.getElementById('product-image-container').innerHTML = product.svg;
                document.title = `Blackheart ‚Äî ${product.name}`;

                const plunderBtn = document.getElementById('plunder-btn');
                plunderBtn.onclick = () => {
                    const priceValue = parseFloat(product.price.replace(/[^0-9.-]+/g, ""));
                    addToCart(productId || 'pirate005', product.name, priceValue, 'svg_placeholder');
                };

            } else {
                document.getElementById('product-container').classList.add('hidden');
                document.getElementById('product-not-found').classList.remove('hidden');
            }
        });

        // --- SCRIPT FOR ADDING TO CART ---
        function addToCart(productId, productName, productPrice, productImage) {
            let cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
            const existingProductIndex = cart.findIndex(item => item.id === productId);
            const quantity = parseInt(document.getElementById('qty').value) || 1;
            
            if (existingProductIndex > -1) {
                cart[existingProductIndex].quantity += quantity;
            } else {
                cart.push({ id: productId, name: productName, price: productPrice, image: productImage, quantity: quantity });
            }
            localStorage.setItem('shoppingCart', JSON.stringify(cart));
            alert(`${productName} (x${quantity}) has been added to yer booty!`);
        }

        // --- SCRIPT FOR ANIMATED BACKGROUND ---
        window.onload = function() {
            const canvas = document.getElementById('bg-canvas');
            if (!canvas) return; // Exit if canvas not found
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);

            const particleCount = 5000;
            const positions = new Float32Array(particleCount * 3);
            const colors = new Float32Array(particleCount * 3);
            const velocities = new Float32Array(particleCount);
            const colorChoices = [new THREE.Color(0xffe58a), new THREE.Color(0x87ceeb), new THREE.Color(0xffffff)];

            for (let i = 0; i < particleCount; i++) {
                positions[i * 3] = (Math.random() - 0.5) * 20;
                positions[i * 3 + 1] = (Math.random() - 0.5) * 20;
                positions[i * 3 + 2] = (Math.random() - 0.5) * 20;
                velocities[i] = Math.random() * 0.5 + 0.5;
                const color = colorChoices[Math.floor(Math.random() * colorChoices.length)];
                colors[i*3] = color.r; colors[i*3+1] = color.g; colors[i*3+2] = color.b;
            }

            const particles = new THREE.BufferGeometry();
            particles.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            particles.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            const particleMaterial = new THREE.PointsMaterial({ size: 0.025, vertexColors: true, transparent: true, opacity: 0.8 });
            const particleSystem = new THREE.Points(particles, particleMaterial);
            scene.add(particleSystem);
            camera.position.z = 5;

            const mouse = new THREE.Vector2();
            document.addEventListener('mousemove', (event) => {
                mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            });
            
            let time = 0;
            function animate() {
                requestAnimationFrame(animate);
                time += 0.005;
                const posAttribute = particles.getAttribute('position');
                for (let i = 0; i < particleCount; i++) {
                    const y = posAttribute.getY(i);
                    posAttribute.setY(i, y + Math.sin(time * velocities[i]) * 0.001);
                }
                posAttribute.needsUpdate = true;
                particleSystem.rotation.y += 0.0002;
                camera.position.x += (mouse.x * 0.5 - camera.position.x) * 0.02;
                camera.position.y += (mouse.y * 0.5 - camera.position.y) * 0.02;
                camera.lookAt(scene.position);
                renderer.render(scene, camera);
            }
            animate();

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        };
    </script>
</body>
</html>

